# IP BASIC
---
### 1. IP(Internet Protocol)란
- 인터넷에 연결된 모든 장치(컴퓨터, 스마트폰, 서버 등)를 식별할 수 있도록 부여되는 고유 주소
- 다른 사람에게 우편을 보내기 위해 주소가 필요하듯, 네트워크에서도 IP 주소가 필요
---
### 2. IP의 공식적인 기능
1) 전송하고자 하는 패킷의 크기를 MTU 이하의 복수 패킷으로 분할하는 것
- MTU (Maximum Transmission Unit)
  - 한 번에 전송 가능한 IP 패킷의 최대 크기
  - IP패킷의 헤더도 MTU 크기에 포함됨
  - MTU 크기 이하로 분할된 패킷은 수신지 도달 시 재조합됨
<img width="1147" height="275" alt="image" src="https://github.com/user-attachments/assets/7fba233b-7970-478c-a06b-481787cf03ab" />

2) 주소 지정
- 송신지 주소
- 수신지 주소
---
### 3. IP 패킷의 핵심 필드
- 단편화에 주로 관여하는 필드
1) 식별자
2) 플래그
3) 단편화 오프셋
- 라우팅에 주로 관여하는 필드
4) TTL
5) 프로토콜
6) 송신지 IP 주소
7) 수신지 IP 주소
---
### 4. 식별자
- 패킷에 할당된 번호
- 분할되어 도착한 IPv4 패킷들이 어느 메세지에서 분할되었는지 식별하기 위해 사용
---
### 5. 플래그
- 세 개의 bit로 구성
- 첫 번째 비트
  - 항상 0, 사용하지 않음
- DF bit(Dont't Fragment)
  - 단편화 수행 불가능 여부 표기
  - 0 : 단편화 가능
  - 1 : 단편화 불가능
- MF bit (More Fragment)
  - 단편화된 패킷이 더 남았는지 여부 표기
  - 0 : 마지막 패킷
  - 1 : 분할된 패킷이 더 있음
---
### 6. 단편화 오프셋 (fragment offset)
- 초기 데이터에서 몇 번째로 떨어진 패킷인지 나타냄
  - 패킷 단편화 후 전송 -> 수신지에 순서를 지키지 않고 도착할 수 있음
  - 재조합 시 패킷을 순서대로 조합하기 위해 순서를 알아야 함
  - 각 단편화된 패킷이 초기 데이터에서 몇 번째에 해당하는 패킷인지 표기
---
### 7. TTL (Time To Live)
- 패킷의 수명
- 무의미한 패킷이 네트워크 상에 지속적으로 남는 것을 방지
- 패킷이 하나의 라우터를 거칠 때마자 TTL 1씩 감소
- TTL이 0으로 떨어진 패킷은 폐기
- 홉(Hop) : 패킷이 라우터 혹은 호스트에 한 번 전달되는 것
  - TTL 필드 값은 홉마다 1씩 감소 
---
### 8. 프로토콜
- 상위 계층의 프로토콜이 무엇인지를 나타내는 필드
---

---
## 4. 공인 IP, 사설 IP, 고정 IP, 유동 IP

| 용어 | 뜻 |
|--|--|
| 고정 IP | 할당된 후 변경되지 않는 IP. 기관, 업체 등 보안이 중요하거나 지속 서비스에 적합함. |
| 유동 IP | 일정 주기 또는 접속 시점마다 ISP가 가용한 IP를 임시로 할당함. 대부분 가정 사용자에게 해당됨. |
| 공인 IP | ISP가 관리하는 범위에서 할당 받은 전 세계 유일한 IP. 외부 인터넷에 직접 노출 가능함. |
| 사설 IP | 내부 네트워크(가정, 회사 등) 내에서만 사용되는 IP. 공유기 등이 내부 기기에 할당함. 외부에서 직접 접근 불가함. |

- 공인 IP는 전 세계적으로 유일함  
- 사설 IP는 특정 네트워크 내에서만 유일함  
- 컴퓨터, 스마트폰 등이 동일 네트워크 내에 있을 경우 서로 통신 가능 (사설 IP)  
- 다른 네트워크에 속한 경우 사설 IP만으로는 직접 통신 불가능

---

## 5. 사설 IP & 사설망 원리

- 사설망(Private Network)은 공유기나 라우터를 통해 구성됨.  
- 공유기까지는 공인 IP, 공유기에 연결된 내부 장치들은 사설 IP를 받음.  
- 내부 장치들끼리는 사설 IP로 통신 가능함.  
- “같은 번호의 사설 IP라도 네트워크가 다르면 전혀 다른 장치로 취급됨.”  
  예: 네트워크 A의 192.168.10.2 ≠ 네트워크 B의 192.168.10.2

---

## 6. NAT (Network Address Translation)

- 사설망 내 장치가 외부 인터넷과 통신하려면 NAT가 필요함.  
- 공유기(또는 라우터)가 내부 사설 IP들을 하나의 공인 IP 또는 할당된 공인 IP들로 변환(주소 번역)함.  
- 외부에서 보면 요청은 공유기의 공인 IP에서 온 것처럼 보임.  
- 공유기는 내부에서 어떤 장치가 요청했는지 기억하고 있다가 응답을 해당 장치에 전달함.

---

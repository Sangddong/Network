# Static IP vs Dynamic IP
### 1. Static IP
- 호스트에 직접(수작업으로) IP 주소를 부여하는 방식
- 부여 방법 : 부여하고자 하는 IP 주소, 서브넷 마스크, 게이트웨이(라우터) 주소, DNS 주소 입력
  - 게이트웨이
    - 일반적 의미 : 서로 다른 네트워크를 연결하는 하드웨어/소프트웨어적 수단
    - 기본 게이트웨이 (IP 할당의 맥락에서 사용되는 의미)
      - 호스트가 속한 **네트워크 외부로 나가기 위한 기본적인 첫 경로**(첫 번째 홉)
      - 네트워크 외부와 연결된 라우터(공유기)의 주소를 의미하는 경우가 많음
  - DNS
    - 도메인 주소와 IP 주소를 변환해주는 작업 수행
- 한계
  - 호스트의 수 많아질 경우 관리 곤란
  - IP 주소를 잘못 입력하거나 중복되게 입력할 수 있음
---
### 2. Dynamic IP
- 프로토콜을 활용하여 호스트에 IP 주소를 자동으로 할당하는 방식
  - 대표적인 프로토콜 : **DHCP**
- 클라이언트와 DHCP 서버 간 메세지 송수신을 통해 할당이 이뤄짐
  - 클라이언트 : IP주소를 할당받고자 하는 호스트
  - DHCP 서버 : 호스트에게 IP 주소를 제공하는 호스트
    - DHCP 서버의 역할은 일반적으로 라우터가 수행
    - 특정 호스트에 DHCP 서버 기능을 추가할 수 있음
    - DHCP 서버는 클라이언트에게 할당 가능한 IP 주소 목록을 관리, 클라이언트 요청 시 IP 주소 할당
---
### 3. DHCP 서버를 통한 IP 주소 할당
- DHCP 서버로부터 할당받은 동적 IP 주소는 사용 기간(임대 기간)이 정해져 있음
- 임대 기간이 끝나면 IP 주소는 다시 DHCP 서버로 반납
- 할당 과정
(1) DHCP Discover
- DHCP 서버를 찾는 메세지
- 클라이언트는 아직 IP 주소를 할당받지 못한 상태 
  - 브로드캐스트로 전송
  - 송신지 주소 = `00000000.00000000.00000000.00000000`
(2) DHCP Offer
- 클라이언트에게 할당 가능한 IP 주소 정보를 제안하는 메세지
- 할당 가능한 IP 주소, 서브넷 마스크, 임대 기간 등의 정보 포함
(3) DHCP Request
- DHCP Offer 메세지에 대한 응답
- 브로드캐스트로 전송
(4) DHCP ACK
- 최종 승인과 같은 메세지
- 클라이언트는 할당받은 IP 주소를 임대기간동안 자신의 IP 주소로 설정
(5) 임대 기간이 종료된다면?
- 원칙적으로는 (1)~(4) 과정을 다시 거침
- 임대 갱신 가능
  - IP 주소 임대 기간이 끝나기 전에 임대 기간을 연장하는 것
  - 임대 기간이 끝나기 전에 기본적으로 두 차례 자동으로 수행
  - 자동 임대 갱신이 모두 실패하면 그때 IP 주소 반납
